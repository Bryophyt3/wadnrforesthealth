@using LtInfo.Common.BootstrapWrappers
@using LtInfo.Common.ModalDialog
@using ProjectFirma.Web.Models
@using ProjectFirma.Web.Views

@inherits ProjectFirma.Web.Views.Grant.GrantDetailsFileDetails

<div class="pull-right">
    @ModalDialogFormHelper.ModalDialogFormLink(string.Format("{0} Add File(s)", FirmaDhtmlxGridHtmlHelpers.PlusIcon), ViewDataTyped.AddDocumentUrl, "Upload New File(s)", new List<string>{"btn", "btn-firma", "btn-sm"}, ViewDataTyped.CanEditDocuments)
</div>

@if (!ViewDataTyped.Documents.Any())
{
    <p class="systemText">No files associated with this @ViewDataTyped.FieldDefinition.GetFieldDefinitionLabel().</p>
}

@foreach (var file in ViewDataTyped.Documents)
{
    <div class="@file.DisplayCssClass">
        @if (ViewDataTyped.CanEditDocuments)
        {
            <span style="margin-left: 8px; margin-right: 8px;">
            @ModalDialogFormHelper.MakeDeleteLink(BootstrapHtmlHelpers.MakeGlyphIcon("glyphicon-trash").ToString(), file.DeleteUrl, null, true)
        </span>
        }

        @if (ViewDataTyped.ShowDownload)
        {
        <a href="@file.FileResource.FileResourceUrl">
            @file.DisplayName
            @BootstrapHtmlHelpers.MakeGlyphIcon("glyphicon-download")
        </a>
        }
        else
        {
            <span>@file.DisplayName</span>
        }

        <dl class="dl-horizontal">
            <dt>Uploaded On</dt>
            <dd title="@file.FileResource.CreateDate.ToLongDateString() @file.FileResource.CreateDate.ToLongTimeString()">@file.FileResource.CreateDate.ToShortDateString()</dd>

            <dt>File Type</dt>
            <dd>@file.FileResource.FileResourceMimeType.FileResourceMimeTypeDisplayName</dd>

        </dl>
    </div>
}