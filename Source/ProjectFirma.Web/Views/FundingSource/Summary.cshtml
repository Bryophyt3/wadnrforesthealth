@using ProjectFirma.Web.Models
@using ProjectFirma.Web.Views.Results
@using ProjectFirma.Web.Views
@using ProjectFirma.Web.Views.Shared
@using LtInfo.Common
@using LtInfo.Common.BootstrapWrappers
@using LtInfo.Common.DhtmlWrappers
@using LtInfo.Common.HtmlHelperExtensions
@using LtInfo.Common.ModalDialog
@using LtInfo.Common.Views
@inherits ProjectFirma.Web.Views.FundingSource.Summary

@section JavascriptAndStylesContent
{
    @{ DhtmlxGridIncludes.RenderPartialView(Html); }
    <script src="@Url.Content("~/Areas/EIP/Views/ProjectFundingSourceExpenditure/ProjectFundingSourceExpenditureController.js")" type="text/javascript"></script>
}

<style>

</style>

<div class="container-fluid">
    <div class="row">
        <div class="col-lg-6">
            <div class="summarySection">
                <h2>@ModalDialogFormHelper.MakeEditIconLink(ViewDataTyped.EditFundingSourceUrl, string.Format("Edit Funding Source - {0}", ViewDataTyped.FundingSource.DisplayName), ViewDataTyped.UserHasFundingSourceManagePermissions) Basics</h2>
                <div class="contentWrapper">
                    <table class="summaryLayout">
                        <tr>
                            <th>@Html.LabelWithFieldDefinitionFor(FieldDefinition.FundingSourceName):</th>
                            <td>
                                @ViewDataTyped.FundingSource.FundingSourceName
                            </td>
                        </tr>
                        <tr>
                            <th>@Html.LabelWithFieldDefinitionFor(FieldDefinition.FundingSourceDescription):</th>
                            <td>
                                @Html.Raw(ViewDataTyped.FundingSource.FundingSourceDescription.HtmlEncodeWithBreaks())
                            </td>
                        </tr>
                        <tr>
                            <th>@Html.LabelWithFieldDefinitionFor(FieldDefinition.Organization):</th>
                            <td>
                                @ViewDataTyped.FundingSource.Organization.GetDisplayNameAsUrl()
                            </td>
                        </tr>
                        <tr>
                            <th>Is Active:</th>
                            <td>
                                @ViewDataTyped.FundingSource.IsActive.ToYesNo()
                            </td>
                        </tr>
                        <tr>
                            <th style="white-space: nowrap">@Html.LabelWithFieldDefinitionFor(FieldDefinition.IsTransportationFundingSource):</th>
                            <td>
                                @ViewDataTyped.FundingSource.IsTransportationFundingSource.ToYesNo()
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <div class="col-lg-6">
            <div class="summarySection" style="height: 500px">
                <h2>Expenditures by Funding Source Sector</h2>
                <div class="contentWrapper">
                    <div style="border-radius: 8px; background-color: white; height: 410px; margin-right: auto; margin-left: auto; width: 600px">                        
                        @{ CalendarYearExpendituresLineChart.RenderPartialView(Html, ViewDataTyped.CalendarYearExpendituresLineChartViewData); }
                    </div>
                </div>
            </div>
        </div>

       
    </div>


    <div class="summarySection">
        <h2>@ModalDialogFormHelper.MakeEditIconLink(ViewDataTyped.EditReportedExpendituresUrl, "Edit Reported Expenditures", 1000, ViewDataTyped.UserHasProjectFundingSourceExpenditureManagePermissions) Reported Expenditures</h2>
        <div class="contentWrapper">
            @Html.DhtmlxGrid(ViewDataTyped.ProjectCalendarYearExpendituresGridSpec, ViewDataTyped.ProjectCalendarYearExpendituresGridName, ViewDataTyped.ProjectCalendarYearExpendituresGridDataUrl, "height:300px", DhtmlxGridResizeType.VerticalResizableHorizontalAutoFit)
        </div>
    </div>

    <div style="margin-top: 20px">
        <a class="btn btn-sm btn-trpa" href="@ViewDataTyped.ManageFundingSourcesUrl">@BootstrapHtmlHelpers.MakeGlyphIcon("glyphicon-chevron-left") Index</a>
    </div>
</div>
