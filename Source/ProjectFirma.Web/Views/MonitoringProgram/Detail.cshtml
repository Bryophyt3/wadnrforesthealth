@*-----------------------------------------------------------------------
<copyright file="Detail.cshtml" company="Sitka Technology Group">
Copyright (c) Sitka Technology Group. All rights reserved.
<author>Sitka Technology Group</author>
<date>Wednesday, February 22, 2017</date>
</copyright>

<license>
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License <http://www.gnu.org/licenses/> for more details.

Source code is available upon request via <support@sitkatech.com>.
</license>
-----------------------------------------------------------------------*@
@using ProjectFirma.Web.Models
@using LtInfo.Common.BootstrapWrappers
@using LtInfo.Common.HtmlHelperExtensions
@using LtInfo.Common.ModalDialog
@inherits ProjectFirma.Web.Views.MonitoringProgram.Detail

@section JavascriptAndStylesContent
{
    <script src="@Url.Content("~/Views/MonitoringProgramPartner/MonitoringProgramPartnerController.js")" type="text/javascript"></script>
}


<div class="panel panelFirma">
    <div class="panel-heading panelTitle">
        <h2>@ModalDialogFormHelper.MakeEditIconLink(ViewDataTyped.EditMonitoringProgramUrl, string.Format("Edit Local and Regional Plan - {0}", ViewDataTyped.MonitoringProgram.MonitoringProgramName), ViewDataTyped.UserHasMonitoringProgramManagePermissions) Basics</h2>
    </div>
    <div class="panel-body">
        <table class="summaryLayout">
            <tr>
                <th style="white-space: nowrap">@Html.LabelWithSugarFor(FieldDefinition.MonitoringProgram)</th>
                <td>
                    @ViewDataTyped.MonitoringProgram.MonitoringProgramName
                </td>
            </tr>
            <tr>
                <th style="white-space: nowrap">@Html.LabelWithSugarFor(FieldDefinition.MonitoringApproach)</th>
                <td>
                    @ViewDataTyped.MonitoringProgram.MonitoringApproach
                </td>
            </tr>
            <tr>
                <th>@Html.LabelWithSugarFor(FieldDefinition.MonitoringProgramUrl, "Home Page")</th>
                <td>
                    <a href="@ViewDataTyped.MonitoringProgram.MonitoringProgramUrl">@ViewDataTyped.MonitoringProgram.MonitoringProgramUrl</a>
                </td>
            </tr>
        </table>
    </div>
</div>

<div class="panel panelFirma">
    <div class="panel-heading panelTitle">
        <h2>@ModalDialogFormHelper.MakeEditIconLink(ViewDataTyped.EditMonitoringProgramPartnersUrl, "Edit Monitoring Program Partners", ViewDataTyped.UserHasMonitoringProgramManagePermissions) @Html.LabelWithSugarFor(FieldDefinition.MonitoringProgramPartner, "Partners")</h2>
    </div>
    <div class="panel-body">
        @if (ViewDataTyped.MonitoringProgram.MonitoringProgramPartners.Any())
        {
            <ul>
                @foreach (var monitoringProgramPartner in ViewDataTyped.MonitoringProgram.MonitoringProgramPartners.OrderBy(x => x.Organization.DisplayName))
                {
                    <li>
                        <a href="@monitoringProgramPartner.Organization.GetSummaryUrl()">@monitoringProgramPartner.Organization.DisplayName</a>
                    </li>
                }
            </ul>
        }
        else
        {
            <p class="alert">No partners for this monitoring program.</p>
        }
    </div>
</div>

<div class="panel panelFirma">
    <div class="panel-heading panelTitle">
        <h2>Documents</h2>
    </div>
    <div class="panel-body">
        <div class="pull-right">
            @ModalDialogFormHelper.ModalDialogFormLink(string.Format("<span class='glyphicon glyphicon-plus-sign' style='margin-right: 3px'></span>Add {0}", "PDF"), ViewDataTyped.MonitoringProgram.NewMonitoringProgramDocumentUrl, "Add New PDF", ViewDataTyped.UserHasMonitoringProgramManagePermissions)
        </div>

        @if (ViewDataTyped.MonitoringProgram.MonitoringProgramDocuments.Any())
        {
            <ul>
                @foreach (var monitoringProgramDocument in ViewDataTyped.MonitoringProgram.MonitoringProgramDocuments.OrderBy(x => x.DisplayName))
                {
                    <li>
                        <a href="@monitoringProgramDocument.FileResource.FileResourceUrl">@monitoringProgramDocument.DisplayName</a>
                        <span class="DeletePhotoButtonClass">
                            @ModalDialogFormHelper.MakeDeleteLink("<span class='glyphicon glyphicon-trash' style='margin-right: 3px'></span>", monitoringProgramDocument.DeleteMonitoringProgramDocumentUrl, ViewDataTyped.UserHasMonitoringProgramManagePermissions)
                        </span>

                    </li>
                }
            </ul>
        }
        else
        {
            <p class="alert">No documents have been uploaded for this monitoring program.</p>
        }
    </div>
</div>

<div class="panel panelFirma">
    <div class="panel-heading panelTitle">
        <h2>Associated PerformanceMeasures</h2>
    </div>
    <div class="panel-body">
        @if (ViewDataTyped.MonitoringProgram.PerformanceMeasureMonitoringPrograms.Any())
        {
            <ul>
                @foreach (var performanceMeasureMonitoringProgram in ViewDataTyped.MonitoringProgram.PerformanceMeasureMonitoringPrograms.OrderBy(x => x.PerformanceMeasure.PerformanceMeasureDisplayName))
                {
                    <li>
                        <a href="@performanceMeasureMonitoringProgram.PerformanceMeasure.GetSummaryUrl()">@performanceMeasureMonitoringProgram.PerformanceMeasure.PerformanceMeasureDisplayName</a>
                    </li>
                }
            </ul>
        }
        else
        {
            <p class="alert">No partners for this monitoring program.</p>
        }
    </div>
</div>

<div style="margin-top: 20px">
    <a class="btn btn-sm btn-firma" href="@ViewDataTyped.IndexUrl">@BootstrapHtmlHelpers.MakeGlyphIcon("glyphicon-chevron-left") Index</a>
</div>
