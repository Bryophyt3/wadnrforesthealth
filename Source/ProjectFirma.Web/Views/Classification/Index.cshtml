@*-----------------------------------------------------------------------
<copyright file="Index.cshtml" company="Tahoe Regional Planning Agency">
Copyright (c) Tahoe Regional Planning Agency. All rights reserved.
<author>Sitka Technology Group</author>
</copyright>

<license>
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License <http://www.gnu.org/licenses/> for more details.

Source code is available upon request via <support@sitkatech.com>.
</license>
-----------------------------------------------------------------------*@
@using LtInfo.Common.DhtmlWrappers
@using ProjectFirma.Web.Models
@using ProjectFirma.Web.Views
@using ProjectFirma.Web.Views.Shared
@inherits ProjectFirma.Web.Views.Classification.Index
@section JavascriptAndStylesContent
{
    @{ DhtmlxGridIncludes.RenderPartialView(Html); }
}

<style>
    .classification {
        text-align: center;
        margin-top: 10px;
        padding-top: 20px;
        padding-bottom: 20px;
        height: 220px;
        border: 2px solid;
        border-radius: 5px;
        margin-right: 10px;
        padding: 5px;
    }

    div.classification {
        position: relative;
    }

        div.classification a {
            color: white;
            position: absolute;
            width: 100%;
            height: 100%;
            margin-top: 20px;
            top: 0;
            left: 0;
            text-decoration: none;
            z-index: 10;
            filter: alpha(opacity=1);
        }


    .bubble-nav ul {
        margin: 0;
        padding: 0;
        text-align: center;
    }

        .bubble-nav ul li {
            margin: 0;
            padding: 0;
            list-style: none;
            display: inline-block;
            *display: inline;
            zoom: 1;
        }

    .bubble-nav .bubble {
        -webkit-transform: translate3d(0, 0, 0);
        -moz-transform: translate3d(0, 0, 0);
        -ms-transform: translate3d(0, 0, 0);
        -o-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
        -webkit-transition: box-shadow 300ms linear;
        -moz-transition: box-shadow 300ms linear;
        -o-transition: box-shadow 300ms linear;
        transition: box-shadow 300ms linear;
        -webkit-box-shadow: 0 0 0 0 rgba(90, 205, 243, 0.3);
        -moz-box-shadow: 0 0 0 0 rgba(90, 205, 243, 0.3);
        box-shadow: 0 0 0 0 rgba(90, 205, 243, 0.3);
        position: relative;
        -webkit-border-radius: 8px;
        -moz-border-radius: 8px;
        -ms-border-radius: 8px;
        -o-border-radius: 50%;
        overflow: hidden;
        margin: 10px;
        border-radius: 8px;
        height: 180px;
        width: auto;
    }

        .bubble-nav .bubble .thumb {
            -webkit-backface-visibility: hidden;
            -moz-backface-visibility: hidden;
            -ms-backface-visibility: hidden;
            -o-backface-visibility: hidden;
            backface-visibility: hidden;
            display: block;
            position: relative;
            background-color: #00aeef;
        }

            .bubble-nav .bubble .thumb .dark-overlay {
                -webkit-transition: background-color 200ms ease-in-out;
                -moz-transition: background-color 200ms ease-in-out;
                -o-transition: background-color 200ms ease-in-out;
                transition: background-color 200ms ease-in-out;
                background-color: rgba(0, 0, 0, 0.4);
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
            }

        .bubble-nav .bubble .menu {
            position: absolute;
            top: 90px;
            -webkit-transform: translate3d(0, 0, 0);
            -moz-transform: translate3d(0, 0, 0);
            -ms-transform: translate3d(0, 0, 0);
            -o-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0);
            -webkit-transition: top 300ms linear;
            -moz-transition: top 300ms linear;
            -o-transition: top 300ms linear;
            transition: top 300ms linear;
            margin-top: -0.6875em;
            left: 0;
            width: 100%;
        }

            .bubble-nav .bubble .menu a {
                display: inline-block;
                *display: inline;
                zoom: 1;
                text-decoration: none;
                color: white;
                position: relative;
            }

                .bubble-nav .bubble .menu a:before {
                    content: '';
                    display: block;
                    position: absolute;
                    top: 100%;
                    left: 50%;
                    height: 1px;
                    width: 0;
                    overflow: hidden;
                    background-color: white;
                    background-color: rgba(255, 255, 255, 0.5);
                }

                .bubble-nav .bubble .menu a.parent {
                    text-transform: uppercase;
                    letter-spacing: 0.05em;
                    font-size: 1.125em;
                    line-height: 1.22222em;
                    margin-bottom: 0.11111em;
                }

                    .bubble-nav .bubble .menu a.parent:before {
                        display: none;
                    }

                    .bubble-nav .bubble .menu a.parent:hover {
                        border-bottom-color: transparent;
                    }

            .bubble-nav .bubble .menu .subpages {
                -webkit-transform: translate3d(0, 0, 0);
                -moz-transform: translate3d(0, 0, 0);
                -ms-transform: translate3d(0, 0, 0);
                -o-transform: translate3d(0, 0, 0);
                transform: translate3d(0, 0, 0);
                max-height: 0;
                opacity: 0;
                -webkit-transition: max-height 300ms linear, opacity 200ms linear, margin-top 200ms linear;
                -moz-transition: max-height 300ms linear, opacity 200ms linear, margin-top 200ms linear;
                -o-transition: max-height 300ms linear, opacity 200ms linear, margin-top 200ms linear;
                transition: max-height 300ms linear, opacity 200ms linear, margin-top 200ms linear;
                overflow: hidden;
            }

                .bubble-nav .bubble .menu .subpages li {
                    display: block;
                    font-size: 0.8125em;
                    line-height: 1.4em;
                    margin: 0.53846em 0 0;
                    padding-bottom: 1px;
                }

        .bubble-nav .bubble:hover .menu, .bubble-nav .bubble.hover .menu, .bubble-nav .bubble.visible .menu {
            top: 30px;
        }

            .bubble-nav .bubble:hover .menu .subpages, .bubble-nav .bubble.hover .menu .subpages, .bubble-nav .bubble.visible .menu .subpages {
                margin-top: 0.38462em;
                opacity: 1;
                max-height: 300px;
            }

            /* centered columns styles */
.row-centered {
    text-align:center;
}
.col-centered {
    display:inline-block;
    float:none;
    /* reset the text-align */
    text-align:left;
    /* inline-block space fix */
    margin-right:-4px;
}
</style>

<div>
    @ViewDataTyped.FirmaPage.FirmaPageContentHtmlString
</div>

<div class="">
    <div class=" bubble-nav">

        <div class="row row-centered">
            @foreach (var classification in ViewDataTyped.Classifications)
            {
                <div class="col-md-4 col-sm-6 col-centered">
                    <ul>
                        <li class="bubble classification @classification.ThemeColor">
                            @if (classification.KeyImageFileResource != null)
                            {
                                <div class="thumb">
                                    <img src="@classification.KeyImageFileResource.FileResourceUrlScaledThumbnail" alt="" width="287" height="180">
                                    <a class="dark-overlay" href="@classification.GetDetailUrl()"></a>
                                </div>
                            }
                            <ul class="menu">
                                <li>
                                    <a class="parent" href="@classification.GetDetailUrl()">@classification.DisplayName</a>
                                    <ul class="subpages">
                                        <li>
                                            <a href="@classification.GetDetailUrl()">@classification.ClassificationDescription</a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            }
        </div>

    </div>
    
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panelFirma">
                <div class="panel-heading panelTitle">
                    @FieldDefinition.Classification.GetFieldDefinitionLabelPluralized() Grid
                </div>
                <div class="panel-body">
                    @Html.DhtmlxGrid(ViewDataTyped.GridSpec, ViewDataTyped.GridName, ViewDataTyped.GridDataUrl, "", DhtmlxGridResizeType.VerticalFillHorizontalAutoFit)
                </div>
            </div>
        </div>
    </div>

</div>


