@using ProjectFirma.Web.Areas.Threshold.Views.ThresholdCategory
@using ProjectFirma.Web.Models
@using LtInfo.Common.BootstrapWrappers
@using LtInfo.Common.HtmlHelperExtensions
@using LtInfo.Common.ModalDialog
@inherits ProjectFirma.Web.Areas.Threshold.Views.ThresholdReportingCategory.Summary


@section JavascriptAndStylesContent
{
    <script src="@Url.Content("~/Views/IndicatorRelationship/IndicatorRelationshipController.js")" type="text/javascript"></script>
}


<div class="summarySection" style="margin-right: 10px">
    <h2>@ModalDialogFormHelper.MakeLtInfoEditIconLink(ViewDataTyped.EditNarrativeUrl, string.Format("Edit Narrative - {0}", ViewDataTyped.ThresholdReportingCategory.DisplayName), 800, ViewDataTyped.UserHasThresholdReportingCategoryManagePermissions) Basics</h2>
    <div class="contentWrapper">
        <table class="summaryLayout">
            <tr>
                <th style="white-space: nowrap">@Html.LabelWithFieldDefinitionFor(FieldDefinition.ThresholdCategory):</th>
                <td>
                    @ViewDataTyped.ThresholdReportingCategory.ThresholdCategory.GetDisplayNameAsUrl()
                </td>
            </tr>
            <tr>
                <th>@Html.LabelWithFieldDefinitionFor(FieldDefinition.ThresholdReportingCategory, "Display Name"):</th>
                <td>
                    @ViewDataTyped.ThresholdReportingCategory.DisplayName
                </td>
            </tr>
            <tr>
                <th>
                    @Html.LabelWithFieldDefinitionFor(FieldDefinition.ThresholdReportingCategoryNarrative, "Description"):
                </th>
                <td>
                    @ViewDataTyped.ThresholdReportingCategory.NarrativeHtmlString
                </td>
            </tr>
        </table>
    </div>
</div>

<div class="row" style="padding-top: 20px">
    <div class="col-lg-6" style="padding-right: 20px">
        <div class="panel panel-default">
            <div class="panel-heading">
                <strong>@ModalDialogFormHelper.MakeLtInfoEditIconLink(ViewDataTyped.EditIndicatorRelationshipsUrl, string.Format("Edit Relationships - {0}", ViewDataTyped.ThresholdReportingCategory.DisplayName), 800, ViewDataTyped.UserHasThresholdReportingCategoryManagePermissions) Relationships</strong>
            </div>
            <div class="panel-body">
                @{ IndicatorRelationships.RenderPartialView(Html, ViewDataTyped.IndicatorRelationshipsViewData); }
            </div>
        </div>
    </div>
    <div class="col-lg-6">
        <div class="pull-right" style="margin: 20px 20px 0 0">
            @ThresholdEvaluation.MakeLegendIconLink()
        </div>
        @{ ThresholdTaxonomy.RenderPartialView(Html, ViewDataTyped.ThresholdTaxonomyViewData); }
    </div>
</div>

<div style="margin-top: 20px">
    <a class="btn btn-blue" href="@ViewDataTyped.IndexUrl">@BootstrapHtmlHelpers.MakeGlyphIcon("glyphicon-chevron-left") Index</a>
</div>