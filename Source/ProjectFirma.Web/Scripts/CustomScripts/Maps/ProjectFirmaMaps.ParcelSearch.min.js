ProjectFirmaMaps.ParcelSearch=function(n,t,i,r){ProjectFirmaMaps.GeoServerMap.call(this,n,t,i);this.parcelSummaryUrl=r;var u="LakeTahoeInfo:AllParcels";this.wmsParams=this.createWmsParamsWithLayerName(u);this.wfsParams=this.createWfsParamsWithLayerName(u);this.addWmsLayer(u,"All Parcels");this.addWmsLayer("LakeTahoeInfo:ParcelDevelopmentRightTransfers","Development Right Transfers");this.map.on("click",this.selectParcel,this)};ProjectFirmaMaps.ParcelSearch.prototype=Sitka.Methods.clonePrototype(ProjectFirmaMaps.GeoServerMap.prototype);ProjectFirmaMaps.ParcelSearch.prototype.findParcelAndAddToMap=function(n){var t={cql_filter:"ParcelNumber='"+n+"'"};this.selectParcelByWFS(t)};ProjectFirmaMaps.ParcelSearch.prototype.selectParcelByWFS=function(n){var t=this,i;Sitka.Methods.isUndefinedNullOrEmpty(this.selectedFeature)||(this.map.removeLayer(this.selectedFeature),this.layerControl.removeLayer(this.selectedFeature));i=L.Util.extend(this.wfsParams,n);SitkaAjax.ajax({url:this.geoserverUrlOWS+L.Util.getParamString(i),dataType:"json",jsonpCallback:"getJson"},function(n){t.selectedFeature=L.geoJson(n,{style:function(){return{stroke:!0,strokeColor:"#ff0000",fillColor:"FFFFFF",fillOpacity:0}},onEachFeature:function(n){jQuery("#parcelAddressFinder").val(n.properties.ParcelAddress);SitkaAjax.load(jQuery("#parcelAddressResultDetails"),t.parcelSummaryUrl+"/"+n.properties.ParcelNumber)}}).addTo(t.map);t.map.fitBounds(t.selectedFeature.getBounds())})};ProjectFirmaMaps.ParcelSearch.prototype.selectParcel=function(n){var t={cql_filter:"intersects(Ogr_Geometry, POINT("+n.latlng.lat+" "+n.latlng.lng+"))"};this.selectParcelByWFS(t)};
//# sourceMappingURL=ProjectFirmaMaps.ParcelSearch.min.js.map
